# ASM2VEC Binary to Assembly Converter Documentation

## Overview

The `bin2asm.py` module in the ASM2VEC project provides functionality for extracting assembly functions from binary executable files. This module uses the radare2 reverse engineering framework (via r2pipe) to disassemble binary files and extract normalized assembly code for individual functions.

## Main Functions

### cli

```python
def cli(ipath, opath, minlen):
```

This is the main entry point for the binary to assembly conversion process.

#### Parameters

- `ipath` (str): Input path (file or directory) containing binary executables.
- `opath` (str): Output directory path for extracted assembly functions.
- `minlen` (int): Minimum number of instructions required for a valid function.

#### Functionality

1. Creates the output directory if it doesn't exist.
2. Processes either a single file or all files in a directory.
3. Calls `bin2asm` for each binary file.
4. Prints summary statistics of the conversion process.

### bin2asm

```python
def bin2asm(filename, opath, minlen):
```

This function extracts assembly functions from a single binary file.

#### Parameters

- `filename` (Path): Path to the binary file.
- `opath` (Path): Output directory path.
- `minlen` (int): Minimum number of instructions required for a valid function.

#### Returns

- `int`: Number of functions extracted.

#### Functionality

1. Checks if the file is a valid executable.
2. Uses radare2 to analyze the binary and extract functions.
3. Processes each function, normalizing the assembly code.
4. Saves valid functions as individual files.

### Helper Functions

- `sha3(data)`: Computes the SHA3-256 hash of the given data.
- `validEXE(filename)`: Checks if a file is a valid ELF executable.
- `normalize(opcode)`: Normalizes assembly opcodes by replacing constants and standardizing syntax.
- `fn2asm(pdf, minlen)`: Converts a function's PDF (Print Disassemble Function) output to normalized assembly.

## Usage Example

```python
from asm2vec.package import bin2asm

bin2asm.cli(
    ipath='path/to/binary/files',
    opath='path/to/output/assembly',
    minlen=5  # Minimum 5 instructions per function
)
```

## Dependencies

This module requires the `r2pipe` library, which interfaces with radare2. Make sure radare2 is installed on your system and the `r2pipe` Python package is available.

## Note

This module is crucial for preparing binary executable data for use with the ASM2VEC model. It handles the conversion of binary files to a normalized assembly format, which can then be used for training or inference with the ASM2VEC model.
