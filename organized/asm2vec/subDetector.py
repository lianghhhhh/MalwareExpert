from malwareDetector.detector import detector
from typing import Any
import numpy as np
import os
import subprocess

class subDetector(detector):
    def __init__(self) -> None:
        super().__init__()

    def extractFeature(self) -> Any:
        print('Extracting features from the dataset...')
        # run scripts/bin2asm.py to extract features
        #os.system('python scripts/bin2asm.py')
        subprocess.call("python scripts/bin2asm.py", shell=True)
        return None

    def vectorize(self) -> np.array:
        print('Vectorizing the features...')
        # run scripts/asm2vec.py to vectorize the features
        #os.system('python scripts/test.py')
        subprocess.call("python scripts/test.py", shell=True)

    def model(self, training:bool=True) -> Any:
        if training:
            print('Training...')
            # gnn/main.py/train ?
        else:
            print('Loading model...')
            # gnn/load_model ?

    def predict(self) -> np.array:
        print('Predicting the dataset...')
        # gnn/main.py/predict ? majority_vote ?

if __name__ == '__main__':
    myDetector = subDetector()
    #myDetector.mkdir()
    myDetector.extractFeature()
    print('Training...')
    #os.system('python scripts/train.py')
    subprocess.call("python scripts/train.py", shell=True)
    myDetector.vectorize()
    